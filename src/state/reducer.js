import {Action} from "./actions";
import {Character} from "../game/character/character";
import {DIRECTION} from "../game/direction";

const map = [
    [  3,  5,   6,   4,  12,  13,  13, 18,  3,  5, 47,  45,  44,  45,  44,  45,  44, 45, 42, 47, 46, 47,  46,  47,  46,  47,  46,  47,  46,  47,  46,  47,  46,  47,  46,  47, 46, 47, 46, 47],
    [ 24,  3,   4,  32,  15,  13,  31, 31,  1,  6, 45,  63,  64,  64,  65,  62,  62, 62, 44, 46, 47, 45,  44,  45,  44,  45,  44,  45,  44,  45,  44,  45,  44,  45,  44,  45, 44, 45, 44, 45],
    [ 27,  1,   2,  32,  32,  15,  18, 31,  3,  5, 43,  66,  72,  72,  68,  61,  61, 61, 42, 47, 45, 83,  50,  52,  86,  87,  87,  87,  88,  50,  52,  98,  98,  98,  50,  51, 59, 51, 51, 51],
    [ 27,  3,   4,   1,   2,  32,  15, 31,  1,  6, 45,  66,  72,  72,  39,  65,  60, 60, 44, 46, 43, 83,  56,  55,  89,  90,  90,  90,  91,  53,  55,  97,  99,  97,  53,  54, 54, 54, 54, 57],
    [ 39, 24,   1,   6,   5,   2,  32,  1,  6,  5, 43,  66,  72,  72,  72,  68,  56, 59, 42, 47, 45, 83,  83,  56,  61,  84,  61,  84,  61,  56,  59, 100,  77, 100,  53,  54, 54, 54, 55, 42],
    [ 33, 27,   3,   5,   6,   4,  32,  3,  5,  6, 45,  69,  70,  70,  70,  71,  77, 82, 44, 46, 43, 92,  65,  83,  59,  85,  85,  85,  85,  85,  85,  85, 100,  50,  59,  54, 54, 54, 55, 44],
    [ 33, 27,   1,   6,   5,   2,  32,  1,  6,  5, 43,  56,  54,  59,  58,  77,  50, 55, 42, 47, 45, 50,  68,  83,  83,  83,  83,  56,  59,  51,  52,  85,  50,  58,  63,  96, 53, 59, 55, 42],
    [ 41, 27,   3,   5,   6,   4,  32,  3,  5,  6, 46,  43,  53,  55,  77,  77,  53, 55, 44, 46, 43, 53,  39,  64,  64,  64,  64,  64,  94,  64,  64, 101,  64,  64,  40,  50, 54, 54, 55, 44],
    [ 72, 68,  42,  47,  46,  43,  77, 42, 47, 46, 47,  45,  53,  58,  77,  50,  54, 58, 42, 47, 45, 53,  33, 104, 104, 104, 104, 104, 104, 104, 104, 101, 104, 104,  34,  53, 54, 54, 55, 42],
    [ 72, 68,  44,  46,  47,  45,  77, 44, 46, 47, 45,  50,  58,  77,  50,  54,  55, 77, 44, 46, 43, 82, 103, 103, 103, 103, 103, 103, 103,  53,  55,  85,  53,  57,  57,  57, 59, 54, 58, 44],
    [ 72, 68,  42,  47,  45,  60,  83, 77, 44, 46, 43,  82,  42,  43,  56,  59,  54, 52, 77, 44, 45, 82, 103, 103,  59,  59,  59, 103, 103,  53,  55,  85,  58,  83,  83,  83, 56, 85, 85, 85],
    [ 72, 68,  44,  45,  60,  58,  77, 77, 42, 47, 45,  82,  44,  45,  77,  56,  57, 54, 52, 42, 43, 82, 103,  59, 103, 105, 103,  59, 103,  53,  55,  85,  83, 108, 109, 110,  83, 85, 50, 42],
    [ 72, 68,  42,  43,  60,  77,  77, 77, 44, 46, 43,  53,  52,  77,  77,  42,  43, 53, 55, 44, 45, 82, 103,  59, 103, 106, 103,  59, 103,  53,  55,  85,  83, 111, 112, 113,  83, 85, 55, 44],
    [ 72, 68,  44,  45,  54, 102,  77, 50, 42, 47, 45,  53,  59,  52,  77,  44,  45, 53, 58, 42, 43, 82, 103,  59, 103, 103, 103,  59, 103,  56,  56,  85,  83, 107,  99, 107,  83, 85, 55, 42],
    [ 72, 68,  42,  43,  53,  52,  85, 59, 44, 46, 43,  56,  57,  58,  77,  50,  51, 58, 42, 47, 45, 82, 103, 103,  59,  59,  59, 103, 103,  85,  85,  85,  85,  85,  85,  85,  85, 85, 55, 44],
    [ 72, 68,  44,  45,  53,  54,  85, 60, 42, 47, 46,  43,  42,  43,  50,  54,  55, 42, 47, 46, 43, 82, 103, 103, 103, 103, 103, 103, 103,  50,  50,  51,  51,  51,  51,  51,  51, 51, 55, 42],
    [ 72, 68,  42,  43,  53,  55,  85, 60, 44, 45, 44,  45,  44,  45,  60,  60,  60, 44, 45, 44, 45, 53, 116, 116, 116, 116, 116, 116, 116,  54,  60,  60,  60,  60,  60,  60,  60, 60, 60, 44],
    [ 72, 68,  44,  45,  56,  58,  85, 85, 85, 85, 85,  85, 118, 119, 120,  60,  54, 51, 51, 51, 51, 55, 114, 114, 114, 114, 114, 114, 114,  53,  60,  60,  60,  60,  60,  60,  60, 60, 60, 42],
    [ 72, 68,  92,  65,  83,  83,  83, 63, 96, 50, 52,  85, 121, 122, 123, 117,  56, 59, 54, 54, 54, 55, 114,  60,  60,  60,  60,  42,  43,  60,  60,  60,  83,  83,  83,  83,  83, 83, 60, 44],
    [ 72, 68,  52,  39,  64,  94,  64, 40, 83, 53, 55,  85, 107,  99, 107,  99, 114, 60, 54, 54, 54, 59, 114,  60, 124, 124, 124,  44,  45,  60,  60,  60,  83,  83,  83,  83,  83, 83, 60, 42],
    [ 72, 68,  55,  33, 104, 104, 104, 34, 51, 59, 55,  85,  85,  85,  85,  60,  60, 60, 60, 54, 54, 55, 114,  60,  61,  84,  61,  60, 114,  53,  60,  60,  83,  83,  83,  83,  83, 83, 60, 44],
    [ 72, 68,  53,  52, 114, 115, 114, 56, 57, 57, 57, 116,  59,  60,  60,  60,  60, 60, 54, 54, 54, 55, 114,  60,  60,  85,  60,  60, 114,  53,  60,  60,  83,  83,  83,  83,  83, 83, 60, 42],
    [ 72, 68,  53,  59, 114,  77, 114, 85, 85, 85, 85,  85,  56,  57,  57,  57,  57, 57, 59, 57, 57, 58, 114, 114, 114,  85, 114, 114, 114,  53,  60,  60,  83,  83,  83,  83,  83, 83, 60, 44],
    [ 72, 68,  53,  54,  51,  51,  52, 85, 50, 42, 43,  85,  85,  85,  85,  85,  85, 85, 85, 85, 85, 85,  85,  85,  85,  85,  50,  51,  51,  54,  60,  60,  60,  60,  60,  60,  60, 60, 60, 42],
    [ 72, 68,  59,  57,  57,  54,  55, 85, 82, 44, 45,  50,  51,  51,  51,  51,  51, 59, 51, 51, 51, 51, 116, 116, 116, 116,  57,  59,  54,  54,  60,  60,  60,  60,  60,  60,  60, 60, 60, 44],
    [ 72, 68, 117, 117, 117,  53,  55, 85, 82, 42, 43,  56,  54,  59,  54,  54,  57, 57, 54, 54, 54, 55, 103, 103, 103, 103, 103, 103, 103,  53,  54,  54,  54,  58,  83,  83,  83, 56, 63, 64],
    [ 72, 68, 107,  99, 107,  56,  58, 85, 82, 44, 45,  98,  97,  97,  97,  97,  97, 98, 53, 54, 59, 55, 103, 125, 125, 125, 125, 125, 103,  53,  54,  54,  55,  83, 131, 132, 133, 83, 66, 72],
    [ 72, 68,  52,  77,  77,  77,  85, 85, 59, 42, 43,  97,  60,  86, 115,  88,  60, 97, 54, 59, 54, 55, 103, 125,  42, 127,  43, 125, 103,  53,  54,  54,  55,  83, 128, 129, 130, 83, 66, 72],
    [ 72, 68,  54,  51,  52,  85,  85, 77, 83, 44, 45,  50,  60,  89,  90,  91,  60, 54, 54, 54, 54, 55, 103, 125,  44, 126,  45, 125, 103,  53,  54,  59,  55,  83,  61,  84,  61, 83, 66, 72],
    [ 72, 68,  53,  54,  55,  85,  50, 52, 83, 42, 43,  56,  60,  61,  84,  61,  60, 54, 54, 54, 54, 55, 103, 125, 125, 125, 125, 125, 103,  53,  54,  54,  55,  83,  77,  77,  77, 83, 66, 72],
    [ 72, 68,  56,  57,  55,  85,  53, 58, 42, 47, 46,  43,  56,  58,  77,  56,  57, 57, 59, 57, 57, 59, 103, 103, 103, 103, 103, 103, 103,  56,  57,  57,  57,  52,  83,  83,  42, 43, 66, 72],
    [ 72, 68,  42,  43,  82,  85,  82, 42, 47, 46, 47,  46,  43,  42,  43,  42,  43, 42, 43, 42, 43, 42,  43,  42,  43,  42,  43,  42,  43,  42,  43,  42,  43,  42,  43,  42,  47, 45, 69, 70],
];

const initPage =  {
    x: 3,
    y: 3
};

const initialState = {
    map: null,
    character: null,
    walls: [],
    currentScreenCode: 'TITLE',
    page: null
};

function reducer(action, state = initialState) {
    switch (action.type) {
        case Action.UP:
            return {
                ...state,
                page: state.character.move(DIRECTION.UP)
            };
        case Action.DOWN:
            return {
                ...state,
                page: state.character.move(DIRECTION.DOWN)
            };
        case Action.LEFT: {
            return {
                ...state,
                page: state.character.move(DIRECTION.LEFT)
            };
        }
        case Action.RIGHT: {
            return {
                ...state,
                page: state.character.move(DIRECTION.RIGHT)
            };
        }
        case Action.ENTER: {
            if (state.currentScreenCode === 'TITLE') {
                return {
                ...state,
                    map: map,
                    character: new Character(5, 5, DIRECTION.DOWN),
                    page: initPage,
                    currentScreenCode: 'GAME'
                }
            } else {
                return {
                    ...state,
                };
            }
        }
        case Action.LOAD_GAME: {
            return {
                ...state,
                map: map,
                character: new Character(5, 5, DIRECTION.DOWN),
                page: initPage
            }
        }
    }
}

export {reducer};
