!function(e){var a={};function t(s){if(a[s])return a[s].exports;var r=a[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=a,t.d=function(e,a,s){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var r in e)t.d(s,r,function(a){return e[a]}.bind(null,r));return s},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=3)}([function(e,a,t){e.exports=t.p+"assets/images/map-90.png"},function(e,a,t){e.exports=t.p+"assets/images/map.png"},function(e,a,t){e.exports=t.p+"assets/images/character.png"},function(e,a,t){"use strict";t.r(a);const s={UP:"UP",DOWN:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT",ENTER:"ENTER",LOAD_GAME:"LOAD_GAME"};Object.freeze(s);var r=t(0),c=t.n(r),n=t(1),i=t.n(n),T=t(2),h=t.n(T);class I{static map(){return this.mapImage||(this.mapImage=new Image,this.mapImage.src=i.a),this.mapImage}static map90(){return this.mapImage90||(this.mapImage90=new Image,this.mapImage90.src=c.a),this.mapImage90}static character(){return this.characterImage||(this.characterImage=new Image,this.characterImage.src=h.a),this.characterImage}}const O={DOWN:{first:{x:37,y:35},second:{x:51,y:35}},LEFT:{first:{x:7,y:35},second:{x:21,y:35}},RIGHT:{first:{x:94,y:35},second:{x:109,y:35}},UP:{first:{x:66,y:35},second:{x:80,y:35}}};Object.freeze(O);class o{constructor(e,a,t,s){this.x=e,this.y=a,this.direction=t,this.frame=0,this.offsetX=0,this.offsetY=0,this.speed=3,this.page=s,H(()=>{this.page=x().page,this.map=x().map})}render(e){e.ctx.drawImage(I.character(),this.getFrame(this.direction).x,this.getFrame(this.direction).y,13,16,16*this.x+this.offsetX,16*this.y+this.offsetY,13,16)}checkChangePage(){return 16*this.x+this.offsetX<-6?(this.page={x:this.page.x,y:this.page.y-1},void(this.offsetX=this.offsetX+160)):16*this.x+this.offsetX>150?(this.page={x:this.page.x,y:this.page.y+1},void(this.offsetX=this.offsetX-160)):16*this.y+this.offsetY>120?(this.page={x:this.page.x+1,y:this.page.y},void(this.offsetY=this.offsetY-135)):16*this.y+this.offsetY<-12?(this.page={x:this.page.x-1,y:this.page.y},void(this.offsetY=this.offsetY+135)):void 0}getFrame(e){return 0===this.frame?(this.frame=1,e.first):1===this.frame?(this.frame=0,e.second):void 0}move(e){let a=Math.trunc(this.offsetX/16+this.x),t=Math.trunc(this.offsetY/16+this.y);switch(console.log(a,t),this.direction=e,this.frame=1===this.frame?0:1,e){case O.UP:this.offsetY=this.offsetY-this.speed,this.checkChangePage();break;case O.DOWN:this.offsetY=this.offsetY+this.speed,this.checkChangePage();break;case O.LEFT:this.offsetX=this.offsetX-this.speed,this.checkChangePage();break;case O.RIGHT:this.offsetX=this.offsetX+this.speed,this.checkChangePage()}return this.page}}const d=[[3,5,6,4,12,13,13,18,3,5,47,45,44,45,44,45,44,45,42,47,46,47,46,47,46,47,46,47,46,47,46,47,46,47,46,47,46,47,46,47],[24,3,4,32,15,13,31,31,1,6,45,63,64,64,65,62,62,62,44,46,47,45,44,45,44,45,44,45,44,45,44,45,44,45,44,45,44,45,44,45],[27,1,2,32,32,15,18,31,3,5,43,66,72,72,68,61,61,61,42,47,45,83,50,52,86,87,87,87,88,50,52,98,98,98,50,51,59,51,51,51],[27,3,4,1,2,32,15,31,1,6,45,66,72,72,39,65,60,60,44,46,43,83,56,55,89,90,90,90,91,53,55,97,99,97,53,54,54,54,54,57],[39,24,1,6,5,2,32,1,6,5,43,66,72,72,72,68,56,59,42,47,45,83,83,56,61,84,61,84,61,56,59,100,77,100,53,54,54,54,55,42],[33,27,3,5,6,4,32,3,5,6,45,69,70,70,70,71,77,82,44,46,43,92,65,83,59,85,85,85,85,85,85,85,100,50,59,54,54,54,55,44],[33,27,1,6,5,2,32,1,6,5,43,56,54,59,58,77,50,55,42,47,45,50,68,83,83,83,83,56,59,51,52,85,50,58,63,96,53,59,55,42],[41,27,3,5,6,4,32,3,5,6,46,43,53,55,77,77,53,55,44,46,43,53,39,64,64,64,64,64,94,64,64,101,64,64,40,50,54,54,55,44],[72,68,42,47,46,43,77,42,47,46,47,45,53,58,77,50,54,58,42,47,45,53,33,104,104,104,104,104,104,104,104,101,104,104,34,53,54,54,55,42],[72,68,44,46,47,45,77,44,46,47,45,50,58,77,50,54,55,77,44,46,43,82,103,103,103,103,103,103,103,53,55,85,53,57,57,57,59,54,58,44],[72,68,42,47,45,60,83,77,44,46,43,82,42,43,56,59,54,52,77,44,45,82,103,103,59,59,59,103,103,53,55,85,58,83,83,83,56,85,85,85],[72,68,44,45,60,58,77,77,42,47,45,82,44,45,77,56,57,54,52,42,43,82,103,59,103,105,103,59,103,53,55,85,83,108,109,110,83,85,50,42],[72,68,42,43,60,77,77,77,44,46,43,53,52,77,77,42,43,53,55,44,45,82,103,59,103,106,103,59,103,53,55,85,83,111,112,113,83,85,55,44],[72,68,44,45,54,102,77,50,42,47,45,53,59,52,77,44,45,53,58,42,43,82,103,59,103,103,103,59,103,56,56,85,83,107,99,107,83,85,55,42],[72,68,42,43,53,52,85,59,44,46,43,56,57,58,77,50,51,58,42,47,45,82,103,103,59,59,59,103,103,85,85,85,85,85,85,85,85,85,55,44],[72,68,44,45,53,54,85,60,42,47,46,43,42,43,50,54,55,42,47,46,43,82,103,103,103,103,103,103,103,50,50,51,51,51,51,51,51,51,55,42],[72,68,42,43,53,55,85,60,44,45,44,45,44,45,60,60,60,44,45,44,45,53,116,116,116,116,116,116,116,54,60,60,60,60,60,60,60,60,60,44],[72,68,44,45,56,58,85,85,85,85,85,85,118,119,120,60,54,51,51,51,51,55,114,114,114,114,114,114,114,53,60,60,60,60,60,60,60,60,60,42],[72,68,92,65,83,83,83,63,96,50,52,85,121,122,123,117,56,59,54,54,54,55,114,60,60,60,60,42,43,60,60,60,83,83,83,83,83,83,60,44],[72,68,52,39,64,94,64,40,83,53,55,85,107,99,107,99,114,60,54,54,54,59,114,60,124,124,124,44,45,60,60,60,83,83,83,83,83,83,60,42],[72,68,55,33,104,104,104,34,51,59,55,85,85,85,85,60,60,60,60,54,54,55,114,60,61,84,61,60,114,53,60,60,83,83,83,83,83,83,60,44],[72,68,53,52,114,115,114,56,57,57,57,116,59,60,60,60,60,60,54,54,54,55,114,60,60,85,60,60,114,53,60,60,83,83,83,83,83,83,60,42],[72,68,53,59,114,77,114,85,85,85,85,85,56,57,57,57,57,57,59,57,57,58,114,114,114,85,114,114,114,53,60,60,83,83,83,83,83,83,60,44],[72,68,53,54,51,51,52,85,50,42,43,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,50,51,51,54,60,60,60,60,60,60,60,60,60,42],[72,68,59,57,57,54,55,85,82,44,45,50,51,51,51,51,51,59,51,51,51,51,116,116,116,116,57,59,54,54,60,60,60,60,60,60,60,60,60,44],[72,68,117,117,117,53,55,85,82,42,43,56,54,59,54,54,57,57,54,54,54,55,103,103,103,103,103,103,103,53,54,54,54,58,83,83,83,56,63,64],[72,68,107,99,107,56,58,85,82,44,45,98,97,97,97,97,97,98,53,54,59,55,103,125,125,125,125,125,103,53,54,54,55,83,131,132,133,83,66,72],[72,68,52,77,77,77,85,85,59,42,43,97,60,86,115,88,60,97,54,59,54,55,103,125,42,127,43,125,103,53,54,54,55,83,128,129,130,83,66,72],[72,68,54,51,52,85,85,77,83,44,45,50,60,89,90,91,60,54,54,54,54,55,103,125,44,126,45,125,103,53,54,59,55,83,61,84,61,83,66,72],[72,68,53,54,55,85,50,52,83,42,43,56,60,61,84,61,60,54,54,54,54,55,103,125,125,125,125,125,103,53,54,54,55,83,77,77,77,83,66,72],[72,68,56,57,55,85,53,58,42,47,46,43,56,58,77,56,57,57,59,57,57,59,103,103,103,103,103,103,103,56,57,57,57,52,83,83,42,43,66,72],[72,68,42,43,82,85,82,42,47,46,47,46,43,42,43,42,43,42,43,42,43,42,43,42,43,42,43,42,43,42,43,42,43,42,43,42,47,45,69,70]],_={x:3,y:3},E={map:null,character:null,walls:[],currentScreenCode:"TITLE",page:null};const L=[];let m;const x=()=>m,D=e=>{m=function(e,a=E){switch(e.type){case s.UP:return{...a,page:a.character.move(O.UP)};case s.DOWN:return{...a,page:a.character.move(O.DOWN)};case s.LEFT:return{...a,page:a.character.move(O.LEFT)};case s.RIGHT:return{...a,page:a.character.move(O.RIGHT)};case s.ENTER:return"TITLE"===a.currentScreenCode?{...a,map:d,character:new o(5,5,O.DOWN),page:_,currentScreenCode:"GAME"}:{...a};case s.LOAD_GAME:return{...a,map:d,character:new o(5,5,O.DOWN),page:_}}}(e,m),L.forEach(e=>e())},H=e=>(L.push(e),()=>L.filter(a=>a!==e));const b={SHADOW_BLUE:"SHADOW_BLUE",SHADOW_BROWN:"SHADOW_BROWN",LIGHT_DRY:"LIGHT_DRY",LIGHT_HAIRY:"LIGHT_HAIRY",LIGHT_BROWN:"LIGHT_BROWN"};Object.freeze(b);const g={TOP_LEFT:"TOP_LEFT",TOP_MIDDLE:"TOP_MIDDLE",TOP_RIGHT:"TOP_RIGHT",MIDDLE_LEFT:"MIDDLE_LEFT",MIDDLE_MIDDLE:"MIDDLE_MIDDLE",MIDDLE_RIGHT:"MIDDLE_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_MIDDLE:"BOTTOM_MIDDLE",BOTTOM_RIGHT:"BOTTOM_RIGHT",ANIMATED:"ANIMATED"};Object.freeze(g);class k{constructor(e){this.canvasContext=e}render(e,a,t,s){switch(t){case b.SHADOW_BLUE:switch(s){case g.BOTTOM_LEFT:this.canvasContext.ctx.drawImage(I.map(),307,188,16,16,16*a,16*e,16,16);break;case g.BOTTOM_RIGHT:this.canvasContext.ctx.drawImage(I.map(),324,188,16,16,16*a,16*e,16,16);break;case g.TOP_LEFT:this.canvasContext.ctx.drawImage(I.map(),307,171,16,16,16*a,16*e,16,16);break;case g.TOP_RIGHT:this.canvasContext.ctx.drawImage(I.map(),324,171,16,16,16*a,16*e,16,16)}break;case b.SHADOW_BROWN:switch(s){case g.TOP_LEFT:this.canvasContext.ctx.drawImage(I.map(),341,171,16,16,16*a,16*e,16,16);break;case g.TOP_RIGHT:this.canvasContext.ctx.drawImage(I.map(),358,171,16,16,16*a,16*e,16,16);break;case g.BOTTOM_RIGHT:this.canvasContext.ctx.drawImage(I.map(),341,188,16,16,16*a,16*e,16,16)}break;case b.LIGHT_DRY:switch(s){case g.TOP_LEFT:this.canvasContext.ctx.drawImage(I.map(),137,120,16,16,16*a,16*e,16,16);break;case g.TOP_RIGHT:this.canvasContext.ctx.drawImage(I.map(),154,120,16,16,16*a,16*e,16,16);break;case g.BOTTOM_LEFT:this.canvasContext.ctx.drawImage(I.map(),137,137,16,16,16*a,16*e,16,16);break;case g.BOTTOM_RIGHT:this.canvasContext.ctx.drawImage(I.map(),154,137,16,16,16*a,16*e,16,16)}break;case b.LIGHT_HAIRY:switch(s){case g.TOP_LEFT:this.canvasContext.ctx.drawImage(I.map(),137,103,16,16,16*a,16*e,16,16);break;case g.TOP_RIGHT:this.canvasContext.ctx.drawImage(I.map(),154,103,16,16,16*a,16*e,16,16)}break;case b.LIGHT_BROWN:switch(s){case g.TOP_LEFT:this.canvasContext.ctx.drawImage(I.map(),137,86,16,16,16*a,16*e,16,16);break;case g.TOP_RIGHT:this.canvasContext.ctx.drawImage(I.map(),154,86,16,16,16*a,16*e,16,16)}}}}const p={SHADOW:"SHADOW",SHADOW_HEIGHT:"SHADOW_HEIGHT",SHADOW_SHORT:"SHADOW_SHORT",LIGHT:"LIGHT",LIGHT_HEIGHT:"LIGHT_HEIGHT",LIGHT_RELIEF:"LIGHT_RELIEF",LIGHT_STRAIGHT90:"LIGHT_STRAIGHT90",LIGHT_STRAIGHT:"LIGHT_STRAIGHT",CUTABLE_DRY:"CUTABLE_DRY"};Object.freeze(p);class R{constructor(e){this.canvasContext=e}render(e,a,t,s,r){switch(t){case p.SHADOW:switch(s){case g.MIDDLE_LEFT:this.canvasContext.ctx.drawImage(I.map(),307,222,16,16,16*a,16*e,16,16);break;case g.MIDDLE_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),324,222,16,16,16*a,16*e,16,16);break;case g.BOTTOM_LEFT:this.canvasContext.ctx.drawImage(I.map(),307,239,16,16,16*a,16*e,16,16);break;case g.ANIMATED:this.canvasContext.ctx.drawImage(I.map(),17*(17+r)-16,273,16,16,16*a,16*e,16,16)}break;case p.LIGHT:switch(s){case g.TOP_LEFT:this.canvasContext.ctx.drawImage(I.map(),1,86,16,16,16*a,16*e,16,16);break;case g.TOP_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),18,86,16,16,16*a,16*e,16,16);break;case g.TOP_RIGHT:this.canvasContext.ctx.drawImage(I.map(),35,86,16,16,16*a,16*e,16,16);break;case g.MIDDLE_LEFT:this.canvasContext.ctx.drawImage(I.map(),1,103,16,16,16*a,16*e,16,16);break;case g.MIDDLE_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),18,103,16,16,16*a,16*e,16,16);break;case g.MIDDLE_RIGHT:this.canvasContext.ctx.drawImage(I.map(),35,103,16,16,16*a,16*e,16,16);break;case g.BOTTOM_LEFT:this.canvasContext.ctx.drawImage(I.map(),1,120,16,16,16*a,16*e,16,16);break;case g.BOTTOM_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),18,120,16,16,16*a,16*e,16,16);break;case g.BOTTOM_RIGHT:this.canvasContext.ctx.drawImage(I.map(),35,120,16,16,16*a,16*e,16,16);break;case g.ANIMATED:this.canvasContext.ctx.drawImage(I.map(),17*(17+r)-16,256,16,16,16*a,16*e,16,16)}break;case p.LIGHT_RELIEF:switch(s){case g.TOP_LEFT:this.canvasContext.ctx.drawImage(I.map(),52,137,16,16,16*a,16*e,16,16);break;case g.TOP_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),69,137,16,16,16*a,16*e,16,16);break;case g.TOP_RIGHT:this.canvasContext.ctx.drawImage(I.map(),86,137,16,16,16*a,16*e,16,16);break;case g.MIDDLE_LEFT:this.canvasContext.ctx.drawImage(I.map(),52,154,16,16,16*a,16*e,16,16);break;case g.MIDDLE_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),69,154,16,16,16*a,16*e,16,16);break;case g.MIDDLE_RIGHT:this.canvasContext.ctx.drawImage(I.map(),86,154,16,16,16*a,16*e,16,16);break;case g.BOTTOM_LEFT:this.canvasContext.ctx.drawImage(I.map(),52,171,16,16,16*a,16*e,16,16);break;case g.BOTTOM_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),69,171,16,16,16*a,16*e,16,16);break;case g.BOTTOM_RIGHT:this.canvasContext.ctx.drawImage(I.map(),86,171,16,16,16*a,16*e,16,16)}break;case p.SHADOW_HEIGHT:this.canvasContext.ctx.drawImage(I.map(),392,137,16,16,16*a,16*e,16,16);break;case p.SHADOW_SHORT:this.canvasContext.ctx.drawImage(I.map(),375,120,16,16,16*a,16*e,16,16);break;case p.LIGHT_HEIGHT:this.canvasContext.ctx.drawImage(I.map(),222,154,16,16,16*a,16*e,16,16);break;case p.LIGHT_STRAIGHT90:this.canvasContext.ctx.drawImage(I.map90(),222,104,16,16,16*a,16*e,16,16);break;case p.LIGHT_STRAIGHT:this.canvasContext.ctx.drawImage(I.map(),290,222,16,16,16*a,16*e,16,16);break;case p.CUTABLE_DRY:this.canvasContext.ctx.drawImage(I.map(),222,171,16,16,16*a,16*e,16,16)}}}const G={SHADOW:"SHADOW",LIGHT:"LIGHT"};Object.freeze(G);class w{constructor(e){this.canvasContext=e}render(e,a,t,s){switch(t){case G.SHADOW:switch(s){case g.TOP_RIGHT:this.canvasContext.ctx.drawImage(I.map(),341,120,16,16,16*a,16*e,16,16);break;case g.MIDDLE_RIGHT:this.canvasContext.ctx.drawImage(I.map(),341,137,16,16,16*a,16*e,16,16);break;case g.BOTTOM_LEFT:this.canvasContext.ctx.drawImage(I.map(),307,154,16,16,16*a,16*e,16,16)}break;case G.LIGHT:switch(s){case g.TOP_LEFT:this.canvasContext.ctx.drawImage(I.map(),1,188,16,16,16*a,16*e,16,16);break;case g.TOP_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),18,188,16,16,16*a,16*e,16,16);break;case g.TOP_RIGHT:this.canvasContext.ctx.drawImage(I.map(),35,188,16,16,16*a,16*e,16,16);break;case g.MIDDLE_LEFT:this.canvasContext.ctx.drawImage(I.map(),1,205,16,16,16*a,16*e,16,16);break;case g.MIDDLE_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),18,205,16,16,16*a,16*e,16,16);break;case g.MIDDLE_RIGHT:this.canvasContext.ctx.drawImage(I.map(),35,205,16,16,16*a,16*e,16,16);break;case g.BOTTOM_LEFT:this.canvasContext.ctx.drawImage(I.map(),1,222,16,16,16*a,16*e,16,16);break;case g.BOTTOM_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),18,222,16,16,16*a,16*e,16,16);break;case g.BOTTOM_RIGHT:this.canvasContext.ctx.drawImage(I.map(),35,222,16,16,16*a,16*e,16,16)}}}}class M{constructor(e){this.canvasContext=e}render(e,a,t){switch(t){case g.TOP_LEFT:this.canvasContext.ctx.drawImage(I.map(),52,222,16,16,16*a,16*e,16,16);break;case g.BOTTOM_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),86,205,16,16,16*a,16*e,16,16);break;case g.BOTTOM_RIGHT:this.canvasContext.ctx.drawImage(I.map(),69,239,16,16,16*a,16*e,16,16);break;case g.BOTTOM_LEFT:this.canvasContext.ctx.drawImage(I.map(),52,239,16,16,16*a,16*e,16,16)}}}class C{constructor(e){this.canvasContext=e}render(e,a,t){switch(t){case g.BOTTOM_LEFT:this.canvasContext.ctx.drawImage(I.map(),52,205,16,16,16*a,16*e,16,16);break;case g.TOP_LEFT:this.canvasContext.ctx.drawImage(I.map(),69,188,16,16,16*a,16*e,16,16);break;case g.BOTTOM_RIGHT:this.canvasContext.ctx.drawImage(I.map(),69,205,16,16,16*a,16*e,16,16)}}}const u={SHADOW:"SHADOW",LIGHT:"LIGHT"};Object.freeze(u);class v{constructor(e){this.canvasContext=e}render(e,a,t,s){switch(t){case u.SHADOW:this.canvasContext.ctx.drawImage(I.map(),17*(21+s)-16,341,16,16,16*a,16*e,16,16);break;case u.LIGHT:this.canvasContext.ctx.drawImage(I.map(),17*(21+s)-16,290,16,16,16*a,16*e,16,16)}}}const f={WALL_BROWN_WINDOW:"WALL_BROWN_WINDOW",WALL_GREY_WINDOW:"WALL_GREY_WINDOW",WALL_ROCK:"WALL_ROCK"};Object.freeze(f);const l={ROOF_TILE_VIOLET:"ROOF_TILE_VIOLET",ROOF_TILE_RED:"ROOF_TILE_RED",ROOF_TILE_BLUE:"ROOF_TILE_BLUE",STRONG_BLUE:"STRONG_BLUE",STRONG_VIOLET:"STRONG_VIOLET",ROCK:"ROCK",RED_SHOP:"RED_SHOP",VIOLET_SHOP:"VIOLET_SHOP"};Object.freeze(l);const F={DOOR_GREY:"DOOR_GREY",DOOR_WOOD:"DOOR_WOOD",DOOR_FOREST:"DOOR_FOREST"};Object.freeze(F);class B{constructor(e){this.canvasContext=e}render(e,a,t,s){switch(t){case F.DOOR_WOOD:this.canvasContext.ctx.drawImage(I.map(),52,35,16,16,16*a,16*e,16,16);break;case F.DOOR_FOREST:this.canvasContext.ctx.drawImage(I.map(),239,69,16,16,16*a,16*e,16,16);break;case l.ROCK:this.canvasContext.ctx.drawImage(I.map(),86,35,16,16,16*a,16*e,16,16);break;case f.WALL_ROCK:this.canvasContext.ctx.drawImage(I.map(),69,35,16,16,16*a,16*e,16,16);break;case f.WALL_BROWN_WINDOW:this.canvasContext.ctx.drawImage(I.map(),18,35,16,16,16*a,16*e,16,16);break;case f.WALL_GREY_WINDOW:this.canvasContext.ctx.drawImage(I.map(),1,35,16,16,16*a,16*e,16,16);break;case l.ROOF_TILE_VIOLET:this.canvasContext.ctx.drawImage(I.map(),171,35,16,16,16*a,16*e,16,16);break;case l.ROOF_TILE_RED:this.canvasContext.ctx.drawImage(I.map(),120,35,16,16,16*a,16*e,16,16);break;case l.ROOF_TILE_BLUE:this.canvasContext.ctx.drawImage(I.map(),137,35,16,16,16*a,16*e,16,16);break;case F.DOOR_GREY:this.canvasContext.ctx.drawImage(I.map(),35,35,16,16,16*a,16*e,16,16);break;case l.STRONG_BLUE:switch(s){case g.TOP_LEFT:this.canvasContext.ctx.drawImage(I.map(),1,1,16,16,16*a,16*e,16,16);break;case g.TOP_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),18,1,16,16,16*a,16*e,16,16);break;case g.TOP_RIGHT:this.canvasContext.ctx.drawImage(I.map(),35,1,16,16,16*a,16*e,16,16);break;case g.BOTTOM_LEFT:this.canvasContext.ctx.drawImage(I.map(),1,18,16,16,16*a,16*e,16,16);break;case g.BOTTOM_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),18,18,16,16,16*a,16*e,16,16);break;case g.BOTTOM_RIGHT:this.canvasContext.ctx.drawImage(I.map(),35,18,16,16,16*a,16*e,16,16)}break;case l.STRONG_VIOLET:switch(s){case g.TOP_LEFT:this.canvasContext.ctx.drawImage(I.map(),52,1,16,16,16*a,16*e,16,16);break;case g.TOP_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),69,1,16,16,16*a,16*e,16,16);break;case g.TOP_RIGHT:this.canvasContext.ctx.drawImage(I.map(),86,1,16,16,16*a,16*e,16,16);break;case g.BOTTOM_LEFT:this.canvasContext.ctx.drawImage(I.map(),52,18,16,16,16*a,16*e,16,16);break;case g.BOTTOM_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),69,18,16,16,16*a,16*e,16,16);break;case g.BOTTOM_RIGHT:this.canvasContext.ctx.drawImage(I.map(),86,18,16,16,16*a,16*e,16,16)}break;case l.RED_SHOP:switch(s){case g.TOP_LEFT:this.canvasContext.ctx.drawImage(I.map(),358,1,16,16,16*a,16*e,16,16);break;case g.TOP_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),375,1,16,16,16*a,16*e,16,16);break;case g.TOP_RIGHT:this.canvasContext.ctx.drawImage(I.map(),392,1,16,16,16*a,16*e,16,16);break;case g.BOTTOM_LEFT:this.canvasContext.ctx.drawImage(I.map(),358,18,16,16,16*a,16*e,16,16);break;case g.BOTTOM_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),375,18,16,16,16*a,16*e,16,16);break;case g.BOTTOM_RIGHT:this.canvasContext.ctx.drawImage(I.map(),392,18,16,16,16*a,16*e,16,16)}break;case l.VIOLET_SHOP:switch(s){case g.TOP_LEFT:this.canvasContext.ctx.drawImage(I.map(),103,1,16,16,16*a,16*e,16,16);break;case g.TOP_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),120,1,16,16,16*a,16*e,16,16);break;case g.TOP_RIGHT:this.canvasContext.ctx.drawImage(I.map(),137,1,16,16,16*a,16*e,16,16);break;case g.BOTTOM_LEFT:this.canvasContext.ctx.drawImage(I.map(),103,18,16,16,16*a,16*e,16,16);break;case g.BOTTOM_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),120,18,16,16,16*a,16*e,16,16);break;case g.BOTTOM_RIGHT:this.canvasContext.ctx.drawImage(I.map(),137,18,16,16,16*a,16*e,16,16)}}}}const P={PATH:"PATH"};Object.freeze(P);class S{constructor(e){this.canvasContext=e}render(e,a,t){switch(t){case P.PATH:this.canvasContext.ctx.drawImage(I.map(),273,222,16,16,16*a,16*e,16,16)}}}const W={EXTREME_LEFT:"EXTREME_LEFT",LEFT:"LEFT",MIDDLE_DRY:"MIDDLE_DRY",RIGHT:"RIGHT",EXTREME_RIGHT:"EXTREME_RIGHT"};Object.freeze(W);class A{constructor(e){this.canvasContext=e}render(e,a,t){switch(t){case W.EXTREME_LEFT:this.canvasContext.ctx.drawImage(I.map(),86,188,16,16,16*a,16*e,16,16);break;case W.LEFT:this.canvasContext.ctx.drawImage(I.map(),103,188,16,16,16*a,16*e,16,16);break;case W.MIDDLE_DRY:this.canvasContext.ctx.drawImage(I.map(),120,188,16,16,16*a,16*e,16,16);break;case W.RIGHT:this.canvasContext.ctx.drawImage(I.map(),171,188,16,16,16*a,16*e,16,16);break;case W.EXTREME_RIGHT:this.canvasContext.ctx.drawImage(I.map(),188,188,16,16,16*a,16*e,16,16)}}}const y="DRY";class N{constructor(e){this.canvasContext=e}render(e,a,t){switch(t){case y:this.canvasContext.ctx.drawImage(I.map(),273,137,16,16,16*a,16*e,16,16)}}}const Y={VILLAGE:"VILLAGE"};Object.freeze(Y);class U{constructor(e){this.canvasContext=e}render(e,a,t){switch(t){case Y.VILLAGE:this.canvasContext.ctx.drawImage(I.map(),205,239,16,16,16*a,16*e,16,16)}}}class V{constructor(e){this.canvasContext=e}render(e,a){this.canvasContext.ctx.drawImage(I.map(),307,103,16,16,16*a,16*e,16,16)}}const K="GREY",j="RED";class X{constructor(e){this.canvasContext=e}render(e,a,t){switch(t){case K:this.canvasContext.ctx.drawImage(I.map(),273,188,16,16,16*a,16*e,16,16);break;case j:this.canvasContext.ctx.drawImage(I.map(),341,35,16,16,16*a,16*e,16,16)}}}const z={CHICKEN:"CHICKEN"};Object.freeze(z);class q{constructor(e){this.canvasContext=e}render(e,a,t,s,r){switch(t){case z.CHICKEN:switch(s){case g.TOP_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),17*(13+r)-16,205,16,16,16*a,16*e,16,16);break;case g.BOTTOM_MIDDLE:this.canvasContext.ctx.drawImage(I.map(),205,222,16,16,16*a,16*e,16,16)}}}}class J{constructor(e){this.canvasContext=e}render(e,a){this.canvasContext.ctx.drawImage(I.map(),171,222,16,16,16*a,16*e,16,16)}}class Q{constructor(e){this.canvasContext=e}render(e,a){this.canvasContext.ctx.drawImage(I.map(),103,35,16,16,16*a,16*e,16,16)}}class Z{constructor(e){this.canvasContext=e}render(e,a){this.canvasContext.ctx.drawImage(I.map(),239,52,16,16,16*a,16*e,16,16)}}class ${constructor(e,a,t,s){this.map=e,this.walls=a,this.character=s,this.code="GAME",this.tileFrame=0,this.cptFrame=0,this.squareSize={with:10,height:8},this.page=t,H(()=>{this.page=x().page})}update(e){this.render(e)}render(e){const a=document.getElementById("canvas");a.width=16*this.squareSize.with,a.height=16*this.squareSize.height,e.screenWidth=a.width,e.screenHeight=a.height,e.ctx.fillStyle="black",e.ctx.fillRect(0,0,e.screenWidth,e.screenHeight),this.tree=new k(e),this.grass=new R(e),this.cliff=new w(e),this.mountainBottom=new M(e),this.mountainTop=new C(e),this.sea=new v(e),this.house=new B(e),this.sand=new S(e),this.rim=new A(e),this.rock=new N(e),this.stair=new U(e),this.sign=new V(e),this.dale=new X(e),this.statue=new q(e),this.post=new J(e),this.well=new Q(e),this.telephone=new Z(e);for(let a=8*(this.page.x-1);a<8*this.page.x;a++){for(let e=10*(this.page.y-1);e<10*this.page.y;e++){let t=a-8*(this.page.x-1),s=e-10*(this.page.y-1);switch(this.map[a][e]){case 1:this.tree.render(t,s,b.SHADOW_BLUE,g.TOP_LEFT);break;case 2:this.tree.render(t,s,b.SHADOW_BLUE,g.TOP_RIGHT);break;case 3:this.tree.render(t,s,b.SHADOW_BLUE,g.BOTTOM_LEFT);break;case 4:this.tree.render(t,s,b.SHADOW_BLUE,g.BOTTOM_RIGHT);break;case 5:this.tree.render(t,s,b.SHADOW_BROWN,g.TOP_LEFT);break;case 6:this.tree.render(t,s,b.SHADOW_BROWN,g.TOP_RIGHT);break;case 7:this.tree.render(t,s,b.SHADOW_BROWN,g.BOTTOM_RIGHT);break;case 12:this.grass.render(t,s,p.SHADOW,g.MIDDLE_LEFT);break;case 13:this.grass.render(t,s,p.SHADOW,g.MIDDLE_MIDDLE);break;case 15:this.grass.render(t,s,p.SHADOW,g.BOTTOM_LEFT);break;case 18:this.grass.render(t,s,p.SHADOW,g.ANIMATED,this.tileFrame);break;case 24:this.cliff.render(t,s,G.SHADOW,g.TOP_RIGHT);break;case 27:this.cliff.render(t,s,G.SHADOW,g.MIDDLE_RIGHT);break;case 28:this.cliff.render(t,s,G.SHADOW,g.BOTTOM_LEFT);break;case 31:this.grass.render(t,s,p.SHADOW_HEIGHT);break;case 32:this.grass.render(t,s,p.SHADOW_SHORT);break;case 33:this.mountainBottom.render(t,s,g.BOTTOM_LEFT);break;case 34:this.mountainBottom.render(t,s,g.BOTTOM_RIGHT);break;case 38:this.mountainTop.render(t,s,g.TOP_LEFT);break;case 39:this.mountainTop.render(t,s,g.BOTTOM_LEFT);break;case 40:this.mountainTop.render(t,s,g.BOTTOM_RIGHT);break;case 41:this.sea.render(t,s,u.SHADOW,this.tileFrame);break;case 42:this.tree.render(t,s,b.LIGHT_DRY,g.TOP_LEFT);break;case 43:this.tree.render(t,s,b.LIGHT_DRY,g.TOP_RIGHT);break;case 44:this.tree.render(t,s,b.LIGHT_DRY,g.BOTTOM_LEFT);break;case 45:this.tree.render(t,s,b.LIGHT_DRY,g.BOTTOM_RIGHT);break;case 46:this.tree.render(t,s,b.LIGHT_HAIRY,g.TOP_LEFT);break;case 47:this.tree.render(t,s,b.LIGHT_HAIRY,g.TOP_RIGHT);break;case 48:this.tree.render(t,s,b.LIGHT_BROWN,g.TOP_LEFT);break;case 50:this.grass.render(t,s,p.LIGHT,g.TOP_LEFT);break;case 51:this.grass.render(t,s,p.LIGHT,g.TOP_MIDDLE);break;case 52:this.grass.render(t,s,p.LIGHT,g.TOP_RIGHT);break;case 53:this.grass.render(t,s,p.LIGHT,g.MIDDLE_LEFT);break;case 54:this.grass.render(t,s,p.LIGHT,g.MIDDLE_MIDDLE);break;case 55:this.grass.render(t,s,p.LIGHT,g.MIDDLE_RIGHT);break;case 56:this.grass.render(t,s,p.LIGHT,g.BOTTOM_LEFT);break;case 57:this.grass.render(t,s,p.LIGHT,g.BOTTOM_MIDDLE);break;case 58:this.grass.render(t,s,p.LIGHT,g.BOTTOM_RIGHT);break;case 59:this.grass.render(t,s,p.LIGHT,g.ANIMATED,this.tileFrame);break;case 60:this.grass.render(t,s,p.LIGHT_HEIGHT);break;case 61:this.house.render(t,s,f.WALL_BROWN_WINDOW);break;case 62:this.house.render(t,s,l.ROOF_TILE_VIOLET);break;case 63:this.cliff.render(t,s,G.LIGHT,g.TOP_LEFT);break;case 64:this.cliff.render(t,s,G.LIGHT,g.TOP_MIDDLE);break;case 65:this.cliff.render(t,s,G.LIGHT,g.TOP_RIGHT);break;case 66:this.cliff.render(t,s,G.LIGHT,g.MIDDLE_LEFT);break;case 67:this.cliff.render(t,s,G.LIGHT,g.MIDDLE_MIDDLE);break;case 68:this.cliff.render(t,s,G.LIGHT,g.MIDDLE_RIGHT);break;case 69:this.cliff.render(t,s,G.LIGHT,g.BOTTOM_LEFT);break;case 70:this.cliff.render(t,s,G.LIGHT,g.BOTTOM_MIDDLE);break;case 71:this.cliff.render(t,s,G.LIGHT,g.BOTTOM_RIGHT);break;case 72:this.sea.render(t,s,u.LIGHT,this.tileFrame);break;case 73:this.grass.render(t,s,p.LIGHT_RELIEF,g.TOP_LEFT);break;case 74:this.grass.render(t,s,p.LIGHT_RELIEF,g.TOP_MIDDLE);break;case 75:this.grass.render(t,s,p.LIGHT_RELIEF,g.TOP_RIGHT);break;case 76:this.grass.render(t,s,p.LIGHT_RELIEF,g.MIDDLE_LEFT);break;case 77:this.grass.render(t,s,p.LIGHT_RELIEF,g.MIDDLE_MIDDLE);break;case 78:this.grass.render(t,s,p.LIGHT_RELIEF,g.MIDDLE_RIGHT);break;case 79:this.grass.render(t,s,p.LIGHT_RELIEF,g.BOTTOM_LEFT);break;case 80:this.grass.render(t,s,p.LIGHT_RELIEF,g.BOTTOM_MIDDLE);break;case 81:this.grass.render(t,s,p.LIGHT_RELIEF,g.BOTTOM_RIGHT);break;case 82:this.grass.render(t,s,p.LIGHT_STRAIGHT90);break;case 83:this.grass.render(t,s,p.CUTABLE_DRY);break;case 84:this.house.render(t,s,F.DOOR_GREY);break;case 85:this.sand.render(t,s,P.PATH);break;case 86:this.house.render(t,s,l.STRONG_BLUE,g.TOP_LEFT);break;case 87:this.house.render(t,s,l.STRONG_BLUE,g.TOP_MIDDLE);break;case 88:this.house.render(t,s,l.STRONG_BLUE,g.TOP_RIGHT);break;case 89:this.house.render(t,s,l.STRONG_BLUE,g.BOTTOM_LEFT);break;case 90:this.house.render(t,s,l.STRONG_BLUE,g.BOTTOM_MIDDLE);break;case 91:this.house.render(t,s,l.STRONG_BLUE,g.BOTTOM_RIGHT);break;case 92:this.rim.render(t,s,W.EXTREME_LEFT);break;case 93:this.rim.render(t,s,W.LEFT);break;case 94:this.rim.render(t,s,W.MIDDLE_DRY);break;case 95:this.rim.render(t,s,W.RIGHT);break;case 96:this.rim.render(t,s,W.EXTREME_RIGHT);break;case 97:this.house.render(t,s,f.WALL_ROCK);break;case 98:this.house.render(t,s,l.ROCK);break;case 99:this.house.render(t,s,F.DOOR_WOOD);break;case 100:this.rock.render(t,s,y);break;case 101:this.stair.render(t,s,Y.VILLAGE);break;case 102:this.sign.render(t,s);break;case 103:this.dale.render(t,s,K);break;case 104:this.mountainBottom.render(t,s,g.BOTTOM_MIDDLE);break;case 105:this.statue.render(t,s,z.CHICKEN,g.TOP_MIDDLE,this.tileFrame);break;case 106:this.statue.render(t,s,z.CHICKEN,g.BOTTOM_MIDDLE);break;case 107:this.house.render(t,s,f.WALL_GREY_WINDOW);break;case 108:this.house.render(t,s,l.RED_SHOP,g.TOP_LEFT);break;case 109:this.house.render(t,s,l.RED_SHOP,g.TOP_MIDDLE);break;case 110:this.house.render(t,s,l.RED_SHOP,g.TOP_RIGHT);break;case 111:this.house.render(t,s,l.RED_SHOP,g.BOTTOM_LEFT);break;case 112:this.house.render(t,s,l.RED_SHOP,g.BOTTOM_MIDDLE);break;case 113:this.house.render(t,s,l.RED_SHOP,g.BOTTOM_RIGHT);break;case 114:this.post.render(t,s);break;case 115:this.well.render(t,s);break;case 116:this.grass.render(t,s,p.LIGHT_STRAIGHT);break;case 117:this.house.render(t,s,l.ROOF_TILE_RED);break;case 118:this.house.render(t,s,l.STRONG_VIOLET,g.TOP_LEFT);break;case 119:this.house.render(t,s,l.STRONG_VIOLET,g.TOP_MIDDLE);break;case 120:this.house.render(t,s,l.STRONG_VIOLET,g.TOP_RIGHT);break;case 121:this.house.render(t,s,l.STRONG_VIOLET,g.BOTTOM_LEFT);break;case 122:this.house.render(t,s,l.STRONG_VIOLET,g.BOTTOM_MIDDLE);break;case 123:this.house.render(t,s,l.STRONG_VIOLET,g.BOTTOM_RIGHT);break;case 124:this.house.render(t,s,l.ROOF_TILE_BLUE);break;case 125:this.dale.render(t,s,j);break;case 126:this.house.render(t,s,F.DOOR_FOREST);break;case 127:this.telephone.render(t,s);break;case 128:this.house.render(t,s,l.VIOLET_SHOP,g.BOTTOM_LEFT);break;case 129:this.house.render(t,s,l.VIOLET_SHOP,g.BOTTOM_MIDDLE);break;case 130:this.house.render(t,s,l.VIOLET_SHOP,g.BOTTOM_RIGHT);break;case 131:this.house.render(t,s,l.VIOLET_SHOP,g.TOP_LEFT);break;case 132:this.house.render(t,s,l.VIOLET_SHOP,g.TOP_MIDDLE);break;case 133:this.house.render(t,s,l.VIOLET_SHOP,g.TOP_RIGHT)}}this.character.render(e),this.cptFrame=400===this.cptFrame?0:this.cptFrame+1,30===this.cptFrame&&(this.tileFrame=3===this.tileFrame?0:this.tileFrame+1)}}}const ee=document.getElementById("canvas");ee.width=800,ee.height=600;const ae={screenWidth:800,screenHeight:600,ctx:ee.getContext("2d")};(new class{constructor(){this.keys={up:38,down:40,left:37,right:39,space:32,enter:13,escape:27},this.handledKeys=[],this.handledKeys[this.keys.up]=!1,this.handledKeys[this.keys.down]=!1,this.handledKeys[this.keys.left]=!1,this.handledKeys[this.keys.right]=!1,this.handledKeys[this.keys.space]=!1,this.handledKeys[this.keys.enter]=!1,this.handledKeys[this.keys.escape]=!1}bind(){const e=this;addEventListener("keyup",(function(a){delete e.handledKeys[a.keyCode]}),!1),addEventListener("keydown",(function(a){switch(e.handledKeys[a.keyCode]&&(e.handledKeys[a.keyCode]=!0),a.keyCode){case e.keys.up:D({type:s.UP});break;case e.keys.down:D({type:s.DOWN});break;case e.keys.enter:D({type:s.ENTER});break;case e.keys.left:D({type:s.LEFT});break;case e.keys.right:D({type:s.RIGHT})}}),!1)}}).bind();let te=new class extends class{constructor(){}update(e){this.render(e)}render(e){}}{constructor(){super(),this.code="TITLE"}render(e){super.render(e),e.ctx.font="60px Bomberman",e.ctx.fillStyle="white",e.ctx.fillText("Enter",e.screenWidth/2,330)}},se={};H(()=>{if(te.code!==x().currentScreenCode)switch(x().currentScreenCode){case"GAME":se=x().page,te=new $(x().map,x().walls,x().page,x().character)}}),D({type:s.ENTER});const re=()=>{te.update(ae),requestAnimationFrame(re)};requestAnimationFrame(re);const ce={width:0,height:0,computedWidth:function(){return ce.width},computedHeight:function(){return ce.height}},ne=()=>{ce.width=document.body.offsetWidth,ce.height=document.body.offsetHeight,ee.style.width=ce.computedWidth()+"px",ee.style.height=ce.computedHeight()+"px"};ne(),window.addEventListener("resize",ne,!1)}]);
//# sourceMappingURL=main.js.map